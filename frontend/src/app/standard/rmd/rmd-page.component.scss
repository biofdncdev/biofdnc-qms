.page { display: grid; grid-template-columns: 32% 68%; grid-template-rows: auto 1fr; gap: 0; padding: 16px 24px; height: calc(100vh - 96px); box-sizing: border-box; align-items: stretch; }
.left {
  padding: 0 24px 0 8px; overflow: auto; border-right: 1px solid #e5e7eb; height: 100%;
  h2 { margin: 8px 0 16px; font-size: 22px; font-weight: 700; }
  .search { display:flex; align-items:center; gap:8px; margin-bottom:12px; position:relative; }
  .search input.disabled{ opacity:.5; pointer-events:none; }
  .search .loader{ width:16px; height:16px; border:2px solid #ddd; border-top-color:#1b5fff; border-radius:50%; animation:spin 1s linear infinite; }
  .search .search-nav{ display:flex; align-items:center; gap:6px; margin-left:auto; }
  .search .search-nav .nav{ border:0; background:#eee; width:22px; height:22px; border-radius:4px; cursor:pointer; display:grid; place-items:center; padding:0; line-height:1; text-align:center; box-sizing:border-box; }
  @keyframes spin{ to { transform:rotate(360deg)} }
  input[type=search] { flex: 1; padding: 8px 10px; border: 1px solid #e5e7eb; border-radius: 6px; }
  .clear { border: 0; background: #eee; width: 30px; height: 30px; border-radius: 6px; }
  .cat { font-weight: 700; margin: 14px 0 8px; color: #111827; }
  .item {
    display: block; width: 100%; text-align: left; padding: 10px 10px; border: 0; background: transparent;
    border-radius: 6px; margin-bottom: 6px; cursor: pointer; font-size: 14px;
    &:hover { background: #f7f7f7; }
    &.selected { background: #eef3ff; color: #1b5fff; }
  }
  .muted { color: #6b7280; }
}
.left{ position: relative; }
.sticky{ position: sticky; top: 0; background:#fff; z-index: 3; padding:8px 0 10px; }
.sticky h2{ margin:0 0 16px; }
.search{ display:flex; align-items:center; gap:8px; margin-bottom:0; position:relative; }
.search input.disabled{ opacity:.5; pointer-events:none; }
.search .loader{ width:16px; height:16px; border:2px solid #ddd; border-top-color:#1b5fff; border-radius:50%; animation:spin 1s linear infinite; }
.search .search-nav{ display:flex; align-items:center; gap:6px; margin-left:auto; }
.search .search-nav .nav{ border:0; background:#eee; width:22px; height:22px; border-radius:4px; cursor:pointer; display:grid; place-items:center; padding:0; line-height:1; text-align:center; box-sizing:border-box; }
@keyframes spin{ to { transform:rotate(360deg)} }
.right {
  padding: 4px 16px 0 24px; overflow: hidden; position: relative; background: #fff;
  display:flex; flex-direction:column; /* make toolbar fixed height and content fill the rest */ height: 100%;
  .toolbar { display: flex; align-items: center; gap: 12px; margin: 0 0 8px; }
  .toolbar h2{ font-size: 22px; font-weight: 800; margin: 0; }
  .spacer { flex: 1; }
  .primary { padding: 8px 12px; background: #1b5fff; color: #fff; border: 0; border-radius: 6px; }
  .secondary{ padding:8px 12px; border:1px solid #d1d5db; background:#fff; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; height:34px; }
  .secondary.center{ display:inline-flex; align-items:center; justify-content:center; }
  .toolbar-dropdown{ position:relative; margin-right:8px; }
  .toolbar-dropdown .menu{ position:absolute; right:0; top:36px; width:360px; background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 12px 26px rgba(0,0,0,.12); padding:8px; z-index:2147483647; overflow:hidden; }
  .toolbar-dropdown .menu input{ width:100%; height:32px; border:1px solid #d1d5db; border-radius:8px; padding:4px 8px; margin-bottom:6px; }
  .toolbar-dropdown .menu .list{ max-height:260px; overflow-y:auto; overflow-x:hidden; }
  .toolbar-dropdown .menu .item{ display:flex; align-items:flex-start; gap:10px; width:100%; text-align:left; padding:6px 8px; border:0; background:#fff; border-radius:6px; font-weight:400; }
  .toolbar-dropdown .menu .item:hover{ background:#f8fafc; }
  .toolbar-dropdown .menu .item.active{ background:#eef2ff; }
  .toolbar-dropdown .menu .item .id{ flex:0 0 120px; color:#111827; font-weight:600; }
  .toolbar-dropdown .menu .item .title{ flex:1 1 auto; white-space:normal; word-break:break-word; overflow-wrap:anywhere; }
  .toolbar-dropdown .menu .link-row{ display:flex; align-items:center; gap:8px; border-radius:6px; padding:2px 4px; }
  .toolbar-dropdown .menu .link-row .text{ flex:1; text-align:left; padding:6px 8px; border:0; background:transparent; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .toolbar-dropdown .menu .link-row .text:hover{ background:#f8fafc; border-radius:6px; }
  .toolbar-dropdown .menu .link-row .remove{ border:0; outline:0; background:transparent; color:#111827; cursor:pointer; width:22px; height:22px; font-size:16px; line-height:22px; font-weight:600; flex:0 0 22px; display:inline-flex; align-items:center; justify-content:center; box-shadow:none; border-radius:0; -webkit-appearance:none; appearance:none; }
  .toolbar-dropdown .menu .link-row .remove:hover{ background:transparent; }
  .content { flex:1 1 auto; min-height:0; overflow: hidden; scroll-padding-top: 56px; height: calc(100vh - 120px); }
  iframe { width: 100%; height: 100%; border: 0; background: #fff; display:block; }
}

/* Tables inside loaded docs (when not using iframe) */
.right .doc-header { display:flex; justify-content: space-between; margin-bottom: 16px; }
.right table { border-collapse: collapse; width: 100%; margin-bottom: 16px; }
.right th, .right td { border: 1px solid #d1d5db; padding: 6px 8px; text-align: left; font-size: 13px; }
.right th { background: #f3f4f6; }
.hint{ color:#6b7280; font-size:.9em; margin:4px 0 10px; }
.hint.right{ margin:4px 0 6px; }

/* Linked Records panel */
.linked-records{ border-top:1px solid #e5e7eb; padding:8px 0 16px; display:grid; grid-template-columns: max-content 1fr max-content; column-gap:16px; align-items:start; position:sticky; bottom:0; background:#fff; }
.linked-records .col.left{ grid-column:1; }
.linked-records .col.more-col{ grid-column:3; display:flex; align-items:flex-start; }
.linked-records .col.left{ display:flex; align-items:center; }
.linked-records .col.right{ grid-column:2; }
.linked-records .link-btn{ padding:6px 12px; height:32px; border-radius:8px; border:1px solid #d1d5db; background:#f8fafc; cursor:pointer; font-size:13px; display:inline-flex; align-items:center; }
.linked-records h4{ margin:8px 0; font-size:14px; font-weight:700; }
.linked-records{ position: relative; }
.linked-records .dock-window{ position:relative; height:32px; overflow:hidden; }
.linked-records.expanded .dock-window{ height:auto; }
.linked-records .chips{ position:absolute; bottom:0; left:0; right:0; display:flex; flex-wrap:wrap; gap:8px; margin-bottom:8px; }
.linked-records .more{ border:1px solid #d1d5db; background:#fff; border-radius:8px; padding:6px 10px; font-size:13px; cursor:pointer; height:32px; display:inline-flex; align-items:center; }
.linked-records .chip{ font-size:12px; height:32px; padding:0 10px; border-radius:999px; background:#ffffff; color:#111827; border:1px solid #e5e7eb; display:inline-flex; align-items:center; gap:6px; transition: box-shadow .12s ease, transform .12s ease; }
.linked-records .chip:hover{ box-shadow:0 6px 16px rgba(2,6,23,.12); transform: translateY(-1px); }
.linked-records .chip .remove{ border:0; background:transparent; color:#64748b; cursor:pointer; }
.linked-records .chip.empty{ color:#6b7280; background:#f8fafc; border-style:dashed; }
.linked-records .typeahead{ position:relative; width:100%; }
.linked-records .typeahead input{ width:100%; padding:8px 10px; border:1px solid #e5e7eb; border-radius:8px; }
.linked-records .suggest{ position:absolute; left:0; top:100%; width:100%; background:#fff; border:1px solid #e5e7eb; border-radius:8px; box-shadow:0 8px 18px rgba(0,0,0,.06); max-height:240px; overflow:auto; }
.linked-records .suggest .item{ padding:8px 10px; cursor:pointer; }
.linked-records .suggest .item + .item{ border-top:1px solid #f1f5f9; }
.linked-records .suggest .item:hover{ background:#f8fafc; }

/* modal */
.rec-picker .backdrop{ position:fixed; inset:0; background:rgba(2,6,23,.5); }
.rec-picker .modal{ position:fixed; inset:0; margin:auto; width:min(720px,92vw); max-height:80vh; background:#fff; border-radius:12px; box-shadow:0 20px 60px rgba(0,0,0,.25); display:flex; flex-direction:column; overflow:hidden; }
.rec-picker header{ display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid #eee; }
.rec-picker header .close{ border:0; background:transparent; font-size:20px; cursor:pointer; }
.rec-picker .body{ padding:12px; display:flex; flex-direction:column; gap:10px; }
.rec-picker .body input{ height:36px; border:1px solid #d1d5db; border-radius:10px; padding:6px 10px; }
.rec-picker .picker-list{ max-height:60vh; overflow:auto; border:1px solid #eee; border-radius:10px; }
.rec-picker .picker-item{ padding:10px 12px; cursor:pointer; }
.rec-picker .picker-item.active, .rec-picker .picker-item:hover{ background:#f8fafc; }

/* PDF/이미지 주석용 캔버스 컨테이너 */
.right .pdf-annotator{ position: relative; }
.right .pdf-annotator canvas{ display:block; }
.right .pdf-annotator canvas + canvas{ position:absolute; inset:0; }
.right .pdf-annotator.fullscreen{ position:fixed; inset:0; background:#fff; z-index:9999; padding:12px; display:flex; align-items:center; justify-content:center; }
.right .pdf-annotator.fullscreen canvas{ width: min(100%, 1024px); height: auto; }
.right .pdf-annotator.fullscreen canvas + canvas{ position:absolute; inset:12px; margin:auto; max-width: min(100% - 24px, 1024px); }
.right .pdf-annotator .fs-exit{ position:absolute; top:12px; right:12px; z-index:10000; padding:8px 10px; border:0; border-radius:8px; background:#111827; color:#fff; }

/* 온습도 툴바 정렬/스타일 */
.th-toolbar{ display:flex; align-items:end; gap:16px; flex-wrap:wrap; margin-bottom:8px; }
.th-toolbar .group{ display:flex; align-items:center; gap:8px; }
.th-toolbar .group.buttons{ margin-left:auto; display:flex; gap:8px; }
.th-toolbar .group.tools{ position:relative; }
.th-toolbar .group.tools .tool-menu{ position:absolute; top:36px; left:0; background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:10px; box-shadow:0 12px 26px rgba(0,0,0,.12); z-index:50; min-width:220px; font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif; opacity:0; transform: translateY(-4px); animation: dropdown-in .16s ease-out forwards; }
.th-toolbar .group.tools .tool-menu.hide{ opacity:0; transform: translateY(-6px); animation: dropdown-out .12s ease-in forwards; }
.th-toolbar .group.tools .tool-menu .row{ display:flex; align-items:center; gap:8px; margin:6px 0; }
.th-toolbar .group.tools .tool-menu .swatch{ width:20px; height:20px; border-radius:50%; border:1px solid #e5e7eb; }
/* 선택 효과는 인라인 스타일(box-shadow)로 표현하므로 클래스 스타일 제거 */
@keyframes dropdown-in{ to{ opacity:1; transform:none; } }
@keyframes dropdown-out{ to{ opacity:0; transform: translateY(-8px); } }
.th-toolbar .label{ color:#475569; font-weight:600; font-size:13px; }
.th-toolbar select.gran{ font-size:13px; color:#111827; }
.th-toolbar .group.tools .tool-menu .row{ display:flex; align-items:center; gap:8px; margin:6px 0; }
.th-toolbar .group.tools .tool-menu .swatch{ width:20px; height:20px; border-radius:50%; border:1px solid #e5e7eb; }
.th-toolbar .group .active{ border-color:#2563eb; background:#eff6ff; color:#1d4ed8; box-shadow:0 0 0 3px rgba(37,99,235,.15); }
.th-toolbar input[type=date].date{ padding:6px 10px; border:1px solid #e5e7eb; border-radius:10px; background:#fff; }
.th-toolbar button{ padding:6px 10px; border-radius:8px; border:1px solid #e5e7eb; background:#f8fafc; }
.th-toolbar button.primary{ background:#2563eb; color:#fff; border-color:#2563eb; }
.th-toolbar button.secondary{ background:#fff; }
.th-toolbar button:hover{ filter: brightness(0.97); box-shadow:0 1px 2px rgba(0,0,0,.08); }
.th-toolbar button:active{ transform: translateY(1px); filter: brightness(0.94); }
.th-toolbar .nav{ height:32px; border-radius:999px; font-weight:700; display:inline-flex; align-items:center; gap:6px; }
.th-toolbar .nav .chev{ font-size:18px; line-height:1; }
.th-toolbar .nav .lab{ font-size:13px; }
.th-toolbar select.gran{ padding:6px 10px; border-radius:10px; border:1px solid #e5e7eb; background:#fff; }
.th-toolbar input.has-record{ outline:2px solid #22c55e; outline-offset:1px; }
