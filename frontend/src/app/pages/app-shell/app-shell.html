<div class="app-shell">
  <aside class="nav-rail">
    <button class="rail-item" *ngFor="let m of menus" [class.active]="selected() === m.key"
            mat-icon-button [matTooltip]="m.label"
            (mouseenter)="onRailMouseEnter(m.key)"
            (click)="onMainClick(m)">
      <mat-icon [fontIcon]="m.icon"></mat-icon>
      <span>{{m.label}}</span>
    </button>

    <div class="rail-spacer"></div>

    <div class="account">
      <button mat-icon-button matTooltip="Account" (click)="openAccountList()">
        <mat-icon>account_circle</mat-icon>
      </button>
    </div>
  </aside>

  <section class="content" [class.drawer-open]="leftOpen" @routeFade>
    <header class="topbar">
      <div class="brand">BIO-FD&C QMS</div>
    </header>

    <main class="viewport">
      <router-outlet></router-outlet>
    </main>
  </section>

  <!-- Left slide panel without backdrop; overlays right next to the nav rail -->
  <aside class="section-drawer" [class.open]="leftOpen" aria-label="Section menu">
    <div class="side-menu">
      <div class="side-title">{{ selected() | titlecase }}</div>
      <a class="side-link" *ngFor="let item of sectionMenu"
         [class.selected]="item.selected"
         (mousemove)="($event.target as HTMLElement).style.setProperty('--mx', $event.offsetX + 'px'); ($event.target as HTMLElement).style.setProperty('--my', $event.offsetY + 'px')"
         (click)="onSubClick(item)">{{ item.label }}</a>
    </div>
  </aside>

  <!-- right sidenav removed; account opens in left drawer like others -->
</div>
