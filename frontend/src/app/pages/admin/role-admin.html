<div class="role-admin">
  <h3>권한 관리</h3>
  <table mat-table [dataSource]="rows" class="mat-elevation-z1">
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>이름</th>
      <td mat-cell *matCellDef="let r">{{ r.name }}</td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>이메일</th>
      <td mat-cell *matCellDef="let r">{{ r.email }}</td>
    </ng-container>

    <ng-container matColumnDef="created_at">
      <th mat-header-cell *matHeaderCellDef>가입일시</th>
      <td mat-cell *matCellDef="let r">{{ r.created_at | date:'yyyy-MM-dd HH:mm' }}</td>
    </ng-container>

    <ng-container matColumnDef="updated_at">
      <th mat-header-cell *matHeaderCellDef>최종수정일시</th>
      <td mat-cell *matCellDef="let r">{{ r.updated_at ? (r.updated_at | date:'yyyy-MM-dd HH:mm') : '-' }}</td>
    </ng-container>

    <ng-container matColumnDef="last_sign_in_at">
      <th mat-header-cell *matHeaderCellDef>마지막 로그인</th>
      <td mat-cell *matCellDef="let r">{{ r.last_sign_in_at ? (r.last_sign_in_at | date:'yyyy-MM-dd HH:mm') : '-' }}</td>
    </ng-container>

    <ng-container matColumnDef="is_online">
      <th mat-header-cell *matHeaderCellDef>온라인</th>
      <td mat-cell *matCellDef="let r">{{ r.is_online ? 'Yes' : 'No' }}</td>
    </ng-container>

    <ng-container matColumnDef="role">
      <th mat-header-cell *matHeaderCellDef>권한</th>
      <td mat-cell *matCellDef="let r">
        <mat-select [value]="r.role" (selectionChange)="changeRole(r, $event.value)">
          <mat-option *ngFor="let role of roles" [value]="role">{{ role }}</mat-option>
        </mat-select>
      </td>
    </ng-container>

    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> </th>
      <td mat-cell *matCellDef="let r"></td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</div>
